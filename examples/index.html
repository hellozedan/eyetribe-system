<!DOCTYPE html>
<html lang="en">
<head>
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet">
    <link href="css/creative.min.css" rel="stylesheet">
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://localhost:6556/eyetribe.js"></script>
</head>
<body id="page-top">
    <section class="no-padding" id="portfolio">
        <div class="container-fluid screenDiv">
            <div class="row no-gutter popup-gallery">
                <div class="col-lg-4 col-sm-6">
                    <a href="./cards/listentomusic2.jpg" class="portfolio-box">
                        <img src="img/portfolio/thumbnails/4.jpg" class="img-responsive" alt="" >
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="timer"></div>
                                <div class="project-name">
                                    I want to eat
                                </div>
                                <div class="project-category text-faded">
                                    Please
                                </div>
                            </div>
                        </div>
                    </a>

                    <div class="timer"></div>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <a href="./cards/listentomusic2.jpg" class="portfolio-box">
                        <img src="img/portfolio/thumbnails/4.jpg" class="img-responsive" alt="" >
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="timer"></div>
                                <div class="project-name">
                                    I want to b
                                </div>
                                <div class="project-category text-faded">
                                    Please
                                </div>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-lg-4 col-sm-6">
                    <a href="./cards/listentomusic2.jpg" class="portfolio-box">
                        <img src="img/portfolio/thumbnails/4.jpg" class="img-responsive" alt="" >
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-name">
                                    I want to c
                                </div>
                                <div class="project-category text-faded">
                                    Please
                                </div>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-lg-4 col-sm-6">
                    <a href="./cards/listentomusic2.jpg" class="portfolio-box">
                        <img src="img/portfolio/thumbnails/4.jpg" class="img-responsive" alt="" >
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-name">
                                    I want to d
                                </div>
                                <div class="project-category text-faded">
                                    Please
                                </div>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-lg-4 col-sm-6">
                    <a href="./cards/listentomusic2.jpg" class="portfolio-box">
                        <img src="img/portfolio/thumbnails/4.jpg" class="img-responsive" alt="" >
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-name">
                                    I want to e
                                </div>
                                <div class="project-category text-faded">
                                    Please
                                </div>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-lg-4 col-sm-6">
                    <a href="./cards/listentomusic2.jpg" class="portfolio-box">
                        <img src="img/portfolio/thumbnails/4.jpg" class="img-responsive" alt="" >
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-name">
                                    I want to f
                                </div>
                                <div class="project-category text-faded">
                                    Please
                                </div>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-lg-4 col-sm-6">
                    <a href="./cards/listentomusic2.jpg" class="portfolio-box">
                        <img src="img/portfolio/thumbnails/4.jpg" class="img-responsive" alt="" >
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-name">
                                    I want to g
                                </div>
                                <div class="project-category text-faded">
                                    Please
                                </div>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-lg-4 col-sm-6">
                    <a href="./cards/listentomusic2.jpg" class="portfolio-box">
                        <img src="img/portfolio/thumbnails/4.jpg" class="img-responsive" alt="" >
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-name">
                                    I want to h
                                </div>
                                <div class="project-category text-faded">
                                    Please
                                </div>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-lg-4 col-sm-6">
                    <a href="./cards/listentomusic2.jpg" class="portfolio-box">
                        <img src="img/portfolio/thumbnails/4.jpg" class="img-responsive" alt="" >
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-name">
                                    I want to i
                                </div>
                                <div class="project-category text-faded">
                                    Please
                                </div>
                            </div>
                        </div>
                    </a>
                </div>


            </div>
        </div>
    </section>
    <script>

    </script>

    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="vendor/scrollreveal/scrollreveal.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>
    <script src="js/creative.min.js"></script>

    <script>
        (function () {
            var message = "";
            function executeChoice() {
                if (message =='g'){
                    $.get( "http://192.168.2.12:4000/api/on", function( data ) {
                    });
                }
                if(message == 'e'){
                    alert('I want to sleep please !');
                }
            }
            function GetAvg(elmt) {
                var sum = 0;
                for (var i = 0; i < elmt.length; i++) {
                    sum += parseInt(elmt[i]); //don't forget to add the base
                }

                var avg = sum / elmt.length;
                return avg;
            }

            var limit = 100;
            var xLimit = {};
            var yLimit = {};
            var firstTime = true;



            var height = $('.screenDiv').height();
            var width = $('.screenDiv').width();
            var screenWidth = screen.width;
            var screenHeight = screen.height;
            var newCoords = {x: 0, y: 0}
            var oldCoords = {x: 0, y: 0}
            var count = 0;
            var newq = [newCoords.x, newCoords.y];
            var XValues = [];
            var YValues = [];
            EyeTribe.loop(function (frame) {



//                var newq = [GetAvg(XValues), GetAvg(YValues)];
                var newq = [(frame.average.x / screenWidth) * width -50, (frame.average.y / screenHeight) * height -50];


                animateDiv(newq)

            })

            var chosen;
            var isElementChanged = false;
            var eyeTime=new Date();
            function animateDiv(newq) {
//            if (firstTime) {
//                xLimit.start = newq[0] - limit;
//                xLimit.end = newq[0] + limit;
//                yLimit.start = newq[1] - limit;
//                yLimit.end = newq[1] + limit;
//                firstTime = false;
//            }
//            if (newq[0] >= xLimit.start && newq[0] <= xLimit.end && newq[1] >= yLimit.start && newq[1] <= yLimit.end) {
//
//            } else {
//                xLimit.start = newq[0] - limit;
//                xLimit.end = newq[0] + limit;
//                yLimit.start = newq[1] - limit;
//                yLimit.end = newq[1] + limit;
//                $('#circle').css({'left': newq[0], 'top': newq[1]})
//            }
                $( ".portfolio-box-caption" ).each(function( index ) {
                    if(newq[1]>= $( this ).position().top && newq[1] <= $( this ).position().top + $( this ).height()
                            && newq[0]>= $( this ).position().left && newq[0] <= $( this ).position().left + $( this ).width()
                    ){
                        if(!chosen)
                            chosen = $( this );
                        else if(chosen[0].innerText != $( this )[0].innerText){

                            chosen.css('background-color', '#b4b472')
                            message = $(this)[0].id;
                            chosen = $( this );
                            isElementChanged = true;
                            eyeTime=new Date();

                        }
                        else
                        {
                            var newEyeTime=new Date();
                            var mSDiff=newEyeTime.getTime() - eyeTime.getTime();
                            if(mSDiff>2000){
                                executeChoice(message);
                                eyeTime=new Date();

                            }
                            isElementChanged = false;
                        }
                        if(!isElementChanged){
                            $( this ).css('background-color', 'blue');
                            $(chosen[0].childNodes[1]).show()
                            isElementChanged = true;
                            console.log('111')
                        }




                    }
                    //console.log( index + ": " + $( this ).position() );
                });
                $('#circle').css({'left': newq[0], 'top': newq[1]})

            };

        })();


    </script>

</body>

</html>
